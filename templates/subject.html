{% load display %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>ESchedule</title>
</head>
<body>
    <style>
        .noscroll1 {
            position: sticky;
            left: 0px;
            background-color: white;
        }
        .noscroll2 {
            background-color: white;
            position: sticky;
            left: 30px;
        }
    </style>
    <div class="container">
        <br>
        <span style="font-weight: 600;"> Fan: <u>{{subject.name}}</u></span>
        <span style="float: right; font-weight: 600;"> O'qituvchi: <u>Salimov Sardor</u></span>
        <hr>
        <div class="table-responsive">
            <table class="table table-bordered" style="white-space: nowrap;">
                <thead>
                    <th class="noscroll1">T/r</th>
                    <th class="noscroll2">F.I.Sh</th>
                    {% for date in grade.dates|dates %}
                        <th>{{ date }}</th>
                    {% endfor %}
                </thead>
                <tbody>
                    {{ grade|as_object:pid|safe }}
                </tbody>
            </table>
        </div>
        {% if user.is_superuser %}
        <div class="card mt-3">
            <form class="card-body" action="{% url 'save' subject.sbid %}" method="post">
                {% csrf_token %}
                <select class="form-control" name="id" id="pupil">
                    {% for pupil in pupils %}
                        <option value="{{ pupil.pid }}">{{ pupil.first_name }} {{ pupil.last_name }} {{ pupil.middle_name }}</option>
                    {% endfor %}
                </select> <br>
                <select class="form-control" name="date" id="date">
                    {% for date in grade.dates|dates %}
                        <option value="{{ date }}">{{ date }}</option>
                    {% endfor %}
                    <option value="{{ now }}">{{ now }}</option>
                </select> <br>
                <select class="form-control" name="grade" id="grade">
                    <option value="5">Yashil - 5</option>
                    <option value="4">Sariq  - 4</option>
                    <option value="3">Qizil  - 3</option>
                    <option value="2">Qora   - 2</option>
                    <option value="1">Oq     - 1</option>
                </select>
                <br>
                <button class="btn btn-primary" style="float: right;" type="submit">Save</button>
            </form>
        </div>
        {% endif %} 
        <br>
        <a class="btn btn-primary" href="{% url 'class' subject.klass.cid %}">Orqaga</a>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</html>